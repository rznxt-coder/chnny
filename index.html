<!DOCTYPE html>
<html lang="en">
<head>
<!-- Social preview (Open Graph + Twitter) -->
<meta property="og:title" content="For Chinny ‚ù§Ô∏è ‚Äî A little note (with music)" />
<meta property="og:description" content="I made this for you. Tap to hear the song and read my message. üíñ" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://YOUR-USERNAME.github.io/YOUR-REPO/" />
<meta property="og:image" content="https://YOUR-USERNAME.github.io/YOUR-REPO/social-card.png" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:alt" content="For Chinny ‚ù§Ô∏è ‚Äî pink gradient with hearts" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="For Chinny ‚ù§Ô∏è ‚Äî A little note (with music)" />
<meta name="twitter:description" content="Tap to hear the song and read my message. üíñ" />
<meta name="twitter:image" content="https://YOUR-USERNAME.github.io/YOUR-REPO/social-card.png" />

<link rel="canonical" href="https://YOUR-USERNAME.github.io/YOUR-REPO/" />
<link rel="icon" href="/favicon.ico" />
<meta name="theme-color" content="#ff3366" />

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>For Chinny ‚ù§Ô∏è</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --accent:#ff3366;
    --card:#fff;
    --glass:rgba(255,255,255,0.88);
    --success1:#22c55e; --success2:#16a34a;
    --danger1:#f43f5e;  --danger2:#ef4444;
    --heart1:#ff1e2d;   --heart2:#ff6f6f;
    --safe-top: env(safe-area-inset-top, 0px);
    --safe-right: env(safe-area-inset-right, 0px);
    --safe-bottom: env(safe-area-inset-bottom, 0px);
    --safe-left: env(safe-area-inset-left, 0px);
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  html{-webkit-text-size-adjust:100%}

  /* Use dynamic viewport units on iOS so the layout doesn‚Äôt jump when bars appear */
  body{
    margin:0;
    font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial;
    display:flex;align-items:center;justify-content:center;
    min-height:100svh; /* <‚Äî key for iOS */
    padding:calc(8px + var(--safe-top)) calc(8px + var(--safe-right)) calc(8px + var(--safe-bottom)) calc(8px + var(--safe-left));
    background:linear-gradient(135deg,#ffdde1 0%,#ee9ca7 100%);
    -webkit-font-smoothing:antialiased;
    overflow-x:hidden;
    touch-action:manipulation;
  }

  /* Side GIFs (auto-hide on tight spaces) */
  .side-gif{
    position:fixed; top:50%; transform:translateY(-50%);
    width:clamp(88px, 16svw, 220px);
    opacity:.95; pointer-events:none;
    filter:drop-shadow(0 12px 28px rgba(0,0,0,.25));
    z-index:1;
  }
  .side-gif.left{ left:10px }
  .side-gif.right{ right:10px }

  .card{
    position:relative; z-index:2;
    width:min(760px, 94svw);
    background:var(--glass);
    border-radius:24px;
    padding:clamp(18px, 3.2svw, 32px);
    box-shadow:0 24px 70px rgba(0,0,0,0.18);
    text-align:center;
    border:4px solid rgba(255,255,255,0.38);
    backdrop-filter: blur(8px);
  }

  h1{
    color:var(--accent);
    margin:6px 0 8px;
    font-weight:700;
    font-size:clamp(22px, 4.2svw, 36px);
    line-height:1.15;
  }
  p.lead{
    margin:0 0 clamp(10px,2svw,18px);
    color:#3f3f3f;
    font-size:clamp(14px, 2.8svw, 18px);
  }
  .card p{ font-size:clamp(13px, 2.6svw, 16px); margin:.25em 0; }

  /* Always-on-top clickable play button */
  #playBtn{
    appearance:none;border:0;cursor:pointer;
    background:linear-gradient(90deg,var(--accent),#ff6b8a);
    color:#fff;
    padding:clamp(10px,1.8svw,14px) clamp(18px,3.4svw,28px);
    border-radius:999px;font-weight:700;
    font-size:clamp(14px,3.4svw,18px);
    box-shadow:0 12px 34px rgba(255,77,109,0.22);
    position:relative; z-index:9999; pointer-events:auto;
    margin-top:6px;
  }

  /* Panels */
  .panel{display:none;margin-top:clamp(10px,2svw,18px);align-items:center;justify-content:center;flex-direction:column}
  .panel--visible{display:flex}

  /* Gradient border around the question box */
  .fancy-border{
    width:100%; max-width:min(620px, 92svw); margin:10px auto 0;
    border-radius:18px; padding:3px; background:linear-gradient(135deg,#ff3a54,#ffa2b1);
  }
  .fancy-inner{
    background:#fff; border-radius:16px;
    padding:clamp(16px, 3svw, 24px) clamp(12px, 2.4svw, 20px);
    border:2px solid rgba(0,0,0,0.06);
  }
  .fancy-inner h2{
    margin:0 0 clamp(10px,2svw,16px);
    color:var(--accent);
    font-size:clamp(18px, 3.8svw, 22px);
  }

  /* Button playground scales with screen height and width */
  .btn-area{
    position:relative; width:100%;
    height:clamp(140px, 26svh, 240px);
    margin-top:clamp(4px,1.4svw,8px);
    overflow:hidden;
  }
  .choice{
    position:absolute; border:none; font-weight:700; cursor:pointer;
    border-radius:14px; box-shadow:0 8px 22px rgba(0,0,0,.10);
    color:#fff; user-select:none; transition:transform .08s ease;
    padding:clamp(10px,1.8svw,12px) clamp(18px,3.2svw,22px);
    font-size:clamp(14px,3.4svw,18px);
  }
  #yesBtn{ background:linear-gradient(90deg,var(--success1),var(--success2)); }
  #noBtn { background:linear-gradient(90deg,var(--danger1),var(--danger2)); }

  /* Final message */
  #messageDiv .messageBox{
    background:#fff; padding:clamp(18px,3svw,28px) clamp(14px,2.6svw,22px);
    border-radius:16px;
    border:2px solid rgba(0,0,0,0.06);
    box-shadow:0 12px 34px rgba(0,0,0,.12);
    max-width:min(600px, 92svw);
  }
  #messageDiv h2{color:var(--accent); margin:0 0 8px; font-size:clamp(18px, 4svw, 22px); }

  /* Floating hearts */
  .bg-hearts{
    position:absolute; inset:0; overflow:hidden; border-radius:20px; pointer-events:none;
  }
  .bg-hearts span{
    position:absolute; bottom:-40px; width:18px; height:18px;
    background:linear-gradient(135deg,var(--heart1),var(--heart2));
    transform:rotate(45deg); animation:float 8s linear infinite; opacity:.35;
  }
  .bg-hearts span::before,.bg-hearts span::after{
    content:""; position:absolute; width:18px; height:18px; border-radius:50%; background:inherit;
  }
  .bg-hearts span::before{ left:-9px; top:0 } .bg-hearts span::after { top:-9px; left:0 }
  @keyframes float{ 0%{ transform:translateY(0) rotate(45deg)} 100%{ transform:translateY(-120svh) rotate(45deg)} }

  /* Short screens (landscape phones) ‚Äî give more vertical room, hide GIFs if too cramped */
  @media (max-height: 540px){
    .btn-area{ height:clamp(120px, 36svh, 200px); }
    .side-gif{ display:none; }
  }

  /* Very narrow phones ‚Äî shrink/hide side gifs to avoid crowding */
  @media (max-width: 380px){
    .side-gif{ width:clamp(72px, 22svw, 120px); opacity:.8 }
  }
</style>
</head>
<body>
  <!-- Optional side GIFs: set src to your hug gif URLs or local file names -->
  <img id="gifLeft"  class="side-gif left"  src="hug.gif" alt="Sending love" onerror="this.style.display='none'">
  <img id="gifRight" class="side-gif right" src="hug.gif" alt="Sending love" onerror="this.style.display='none'">

  <div class="card" role="main" aria-label="Apology card">
    <div class="bg-hearts" aria-hidden="true">
      <span style="left:6% ; animation-delay:.0s;"></span>
      <span style="left:18%; animation-delay:1.2s;"></span>
      <span style="left:32%; animation-delay:.6s;"></span>
      <span style="left:48%; animation-delay:2.1s;"></span>
      <span style="left:64%; animation-delay:1.0s;"></span>
      <span style="left:82%; animation-delay:1.6s;"></span>
      <span style="left:92%; animation-delay:.3s;"></span>
    </div>

    <h1>For Chinny ‚ù§Ô∏è</h1>
    <p class="lead">I made this for you ‚Äî tap the song.</p>
    <p>First time ko gumawa nito I hope you like it.</p>

    <!-- Clickable button -->
    <button id="playBtn" aria-label="Play song" onclick="window.__playSongBtn && window.__playSongBtn()">
      Tap to Hear the Song ‚ù§Ô∏è
    </button>

    <!-- Question Panel -->
    <div id="questionPanel" class="panel">
      <div class="fancy-border">
        <div class="fancy-inner">
          <h2>Do you still love me?</h2>
          <div class="btn-area" id="btnArea">
            <button id="yesBtn" class="choice" aria-label="Yes">Yes ‚ù§Ô∏è</button>
            <button id="noBtn"  class="choice" aria-label="No">No üíî</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Final Message -->
    <div id="messageDiv" class="panel">
      <div class="messageBox">
        <h2 id="finalTitle">I‚Äôm sorry ‚ù§Ô∏è</h2>
        <p id="finalMessage">Sorry kung nasira ko yung trust mo sa'kin ng sobra, pero gusto ko iparating sayo na mahal kita.</p>
        <p>I know a simple sorry couldn't fix everything but maybe just MAYBE of making an effort would change the outcome.</p>
        <p>Wherever I am and whoever I'm with or talk to, ikaw lamang ang iniisip. I know I hurt you so bad and in this way</p>
        <p>I want to apologize sincerely to you, this may be not enough but a step towards it. Gagawan pa kita ng laro diba?</p>
        <p>Larong mas maganda pa kesa before sa mga ginawa ko, I am willing to learn just for you. So please don't hold grudges.</p>
        <p>Sorry again, sobra po sorry. I want you to know that I love you.</p>
      </div>
    </div>
  </div>

  <!-- Local audio -->
  <audio id="song" src="song.mp3" loop preload="auto" playsinline></audio>

  <script>
    // ===== DOM =====
    const qPanel  = document.getElementById('questionPanel');
    const msgDiv  = document.getElementById('messageDiv');
    const btnArea = document.getElementById('btnArea');
    const yesBtn  = document.getElementById('yesBtn');
    const noBtn   = document.getElementById('noBtn');
    const song    = document.getElementById('song');

    // ===== Button layout + No-dodge (no overlap) =====
    let yesGrowSteps = 0; const MAX_GROW_STEPS = 8;

    function sizeYes(){
      const baseFs = 16, basePadY = 10, basePadX = 18, step = 2;
      const g = Math.min(yesGrowSteps, MAX_GROW_STEPS);
      yesBtn.style.fontSize = (baseFs + g * step) + 'px';
      yesBtn.style.padding  = (basePadY + g * 1.4) + 'px ' + (basePadX + g * 3) + 'px';

      const a = btnArea.getBoundingClientRect();
      const w = yesBtn.offsetWidth, h = yesBtn.offsetHeight;
      yesBtn.style.left = Math.max(8, (a.width - w)/2) + 'px';
      yesBtn.style.top  = Math.max(8, (a.height - h)/2) + 'px';
    }

    function rect(el, parent){
      const a = parent.getBoundingClientRect();
      const b = el.getBoundingClientRect();
      return { left:b.left-a.left, top:b.top-a.top, right:b.right-a.left, bottom:b.bottom-a.top, width:b.width, height:b.height };
    }
    function overlap(r1, r2){
      return !(r1.right <= r2.left || r1.left >= r2.right || r1.bottom <= r2.top || r1.top >= r2.bottom);
    }

    function placeInitial(){
      sizeYes();
      const a = btnArea.getBoundingClientRect();
      const yRect = rect(yesBtn, btnArea);
      const nW = noBtn.offsetWidth, nH = noBtn.offsetHeight;
      let x = Math.min(a.width - nW - 8, yRect.right + 18);
      if(x < 8) x = a.width - nW - 8;
      const y = Math.max(8, (a.height - nH)/2);
      noBtn.style.left = x + 'px';
      noBtn.style.top  = y + 'px';
    }

    function moveNo(){
      yesGrowSteps++; sizeYes();
      const a = btnArea.getBoundingClientRect();
      const yRect = rect(yesBtn, btnArea);
      const nW = noBtn.offsetWidth, nH = noBtn.offsetHeight;

      const pad = 8;
      const maxX = Math.max(pad, a.width - nW - pad);
      const maxY = Math.max(pad, a.height - nH - pad);

      let tries = 0, placed = false, nx = 0, ny = 0;
      while(tries < 250){
        nx = pad + Math.random() * (maxX - pad);
        ny = pad + Math.random() * (maxY - pad);
        const nRect = { left:nx, top:ny, right:nx+nW, bottom:ny+nH, width:nW, height:nH };
        if(!overlap(nRect, yRect)){ placed = true; break; }
        tries++;
      }
      if(!placed){
        const right = yRect.left < a.width/2;
        nx = right ? (a.width - nW - pad) : pad;
        ny = pad;
      }
      noBtn.style.left = nx + 'px';
      noBtn.style.top  = ny + 'px';
    }

    // ===== Play button (Safari/Opera GX friendly) =====
    window.__playSongBtn = async function () {
      const btn = document.getElementById('playBtn');
      if (btn) btn.style.display = 'none';

      qPanel.classList.add('panel--visible');
      const inner = qPanel.querySelector('.fancy-inner');
      if (inner) {
        inner.style.opacity = 0;
        requestAnimationFrame(()=>{ inner.style.transition='opacity .35s ease'; inner.style.opacity=1; });
      }
      placeInitial();

      try{ song.muted=false; song.volume=1; song.load?.(); await song.play(); }
      catch{ setTimeout(()=> song.play().catch(()=>{}), 160); }
    };
    document.getElementById('playBtn')?.addEventListener('click', window.__playSongBtn, {passive:true});

    noBtn.addEventListener('click', moveNo, {passive:true});
    yesBtn.addEventListener('click', ()=>{ qPanel.classList.remove('panel--visible'); msgDiv.classList.add('panel--visible'); song.play().catch(()=>{}); }, {passive:true});

    // Re-layout after fonts load and on orientation/resize (important for iOS)
    if (document.fonts && document.fonts.ready) {
      document.fonts.ready.then(()=>{ if(qPanel.classList.contains('panel--visible')) placeInitial(); });
    }
    window.addEventListener('orientationchange', ()=>{ setTimeout(()=>{ if(qPanel.classList.contains('panel--visible')) placeInitial(); }, 180); });
    window.addEventListener('resize', ()=>{ if(qPanel.classList.contains('panel--visible')) placeInitial(); });

    // If your GIF paths are different or remote, you can set gifLeft/gifRight src here
  </script>
</body>
</html>
